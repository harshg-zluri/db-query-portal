
> frontend@0.0.0 test:coverage
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/Users/harshgoyal/Desktop/db-query-portal/frontend[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m src/components/select/select.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 443[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders with label and options [33m 349[2mms[22m[39m
 [32mâœ“[39m src/features/dashboard/components/query-form/query-form.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 470[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders textarea with value [33m 328[2mms[22m[39m
 [32mâœ“[39m src/features/approvals/components/approval-table/approval-table.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 525[2mms[22m[39m
[90mstderr[2m | src/features/admin/components/user-form-modal/user-form-modal.test.tsx[2m > [22m[2mUserFormModal[2m > [22m[2mvalidates password length for new users
[22m[39mAn update to UserFormModal inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstderr[2m | src/features/admin/components/user-form-modal/user-form-modal.test.tsx[2m > [22m[2mUserFormModal[2m > [22m[2mvalidates password length for new users
[22m[39mAn update to UserFormModal inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [31mâ¯[39m src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx [2m([22m[2m19 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 703[2mms[22m[39m
     [32mâœ“[39m renders nothing if request is null[32m 24[2mms[22m[39m
     [32mâœ“[39m renders details correctly[32m 123[2mms[22m[39m
     [32mâœ“[39m renders warnings[32m 24[2mms[22m[39m
     [32mâœ“[39m shows execution result[32m 28[2mms[22m[39m
     [32mâœ“[39m shows rejection reason[32m 15[2mms[22m[39m
     [32mâœ“[39m allows withdrawal for pending requests[32m 289[2mms[22m[39m
     [32mâœ“[39m hides withdraw button for non-pending requests[32m 36[2mms[22m[39m
     [32mâœ“[39m renders script submission type correctly[32m 14[2mms[22m[39m
     [32mâœ“[39m renders compressed result with download link[32m 59[2mms[22m[39m
     [32mâœ“[39m renders execution error[32m 14[2mms[22m[39m
     [32mâœ“[39m renders approver info for approved request[32m 20[2mms[22m[39m
     [32mâœ“[39m renders rejector info for rejected request[32m 7[2mms[22m[39m
     [32mâœ“[39m handles MongoDB database type correctly[32m 4[2mms[22m[39m
     [32mâœ“[39m hides withdraw button when onWithdraw is not provided[32m 14[2mms[22m[39m
     [32mâœ“[39m shows fallback for missing script content[32m 3[2mms[22m[39m
     [32mâœ“[39m shows fallback for missing query[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles download result interaction successfully[39m[32m 18[2mms[22m[39m
[31m     [31mÃ—[31m shows alert if token is missing during download[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m shows alert if download fetch fails[39m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/features/approvals/components/approval-actions/approval-actions.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 752[2mms[22m[39m
 [32mâœ“[39m src/features/auth/components/login-form/login-form.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1051[2mms[22m[39m
 [32mâœ“[39m src/features/admin/components/user-form-modal/user-form-modal.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 1112[2mms[22m[39m
 [32mâœ“[39m src/features/dashboard/components/database-selector/database-selector.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[32m 187[2mms[22m[39m
 [32mâœ“[39m src/features/submissions/components/submission-table/submission-table.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 423[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders loading state [33m 307[2mms[22m[39m
 [32mâœ“[39m src/features/admin/components/user-table/user-table.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 279[2mms[22m[39m
 [32mâœ“[39m src/features/dashboard/components/script-form/script-form.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 217[2mms[22m[39m
 [32mâœ“[39m src/components/code-viewer/code-viewer.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 259[2mms[22m[39m
 [32mâœ“[39m src/components/button/button.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 179[2mms[22m[39m
 [32mâœ“[39m src/components/modal/modal.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 237[2mms[22m[39m
 [32mâœ“[39m src/components/file-upload/file-upload.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 169[2mms[22m[39m
 [32mâœ“[39m src/components/empty-state/empty-state.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32mâœ“[39m src/components/input/input.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 307[2mms[22m[39m
 [32mâœ“[39m src/components/status-badge/status-badge.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 98[2mms[22m[39m
 [32mâœ“[39m src/layouts/sidebar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 128[2mms[22m[39m
 [32mâœ“[39m src/components/skeleton/skeleton.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m src/components/card/card.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 69[2mms[22m[39m
 [32mâœ“[39m src/utils/utils.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/features/approvals/components/warnings-display/warnings-display.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m src/stores/auth-store.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m src/components/loading-spinner/loading-spinner.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/utils/dummy.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx[2m > [22mSubmissionDetailModal[2m > [22mhandles download result interaction successfully
[41m[1m FAIL [22m[49m src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx[2m > [22mSubmissionDetailModal[2m > [22mshows alert if token is missing during download
[41m[1m FAIL [22m[49m src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx[2m > [22mSubmissionDetailModal[2m > [22mshows alert if download fetch fails
[31m[1mRangeError[22m: Maximum call stack size exceeded[39m
[90m [2mâ¯[22m get document node_modules/jsdom/lib/jsdom/browser/Window.js:[2m427:7[22m[39m
[36m [2mâ¯[22m Document.<anonymous> src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx:[2m212:13[22m[39m
    [90m210| [39m        createElementSpy[33m.[39m[34mmockImplementation[39m((tagName) [33m=>[39m {
    [90m211| [39m            [35mif[39m (tagName [33m===[39m [32m'a'[39m) [35mreturn[39m mockAnchor [35mas[39m any[33m;[39m
    [90m212| [39m            return document.createElement(tagName); // delegate othersâ€¦
    [90m   | [39m            [31m^[39m
    [90m213| [39m        })[33m;[39m
    [90m214| [39m
[90m [2mâ¯[22m Document.<anonymous> src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx:[2m212:29[22m[39m
[90m [2mâ¯[22m Document.<anonymous> src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx:[2m212:29[22m[39m
[90m [2mâ¯[22m Document.<anonymous> src/features/submissions/components/submission-detail-modal/submission-detail-modal.test.tsx:[2m212:29[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m25 passed[39m[22m[90m (26)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m192 passed[39m[22m[90m (195)[39m
[2m   Start at [22m 12:15:27
[2m   Duration [22m 6.73s[2m (transform 1.40s, setup 7.18s, import 2.74s, tests 7.93s, environment 19.59s)[22m

